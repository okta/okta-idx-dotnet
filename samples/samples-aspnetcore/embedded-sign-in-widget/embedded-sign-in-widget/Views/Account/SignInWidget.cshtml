@using Microsoft.Extensions.Configuration
@using Newtonsoft.Json
@using Okta.Idx.Sdk

@inject IConfiguration Configuration

@{
    ViewData["Title"] = "Sign In";
}


@model SignInWidgetConfiguration

<script src="https://global.oktacdn.com/okta-signin-widget/6.0.0/js/okta-sign-in.min.js" type="text/javascript"></script>
<link href="https://global.oktacdn.com/okta-signin-widget/6.0.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet" />


    <div id="okta-signin-widget-container"></div>
    <script type="text/javascript">
        const widgetConfig = @Html.Raw(JsonConvert.SerializeObject(Model));

        console.log(widgetConfig.interactionHandle);

        const signIn = new OktaSignIn({
            el: '#okta-signin-widget-container',
            ...widgetConfig
        });
        signIn.showSignInAndRedirect()
            .catch(err => {
                console.log('Error happen in showSignInAndRedirect: ', err);
            });
    </script>
